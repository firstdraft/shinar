<div id="<%= dom_id message %>" class="list-group-item py-3">
  <div class="d-flex justify-content-between mb-2">
    <strong class="text-nowrap text-secondary"><%= message.author.name %></strong>
    <div class="d-flex align-items-center">
      <% if policy(message).edit? %>
        <div class="me-2">
          <%= link_to edit_chat_message_path(message.chat, message), class: "text-muted me-2 text-decoration-none", title: "Edit", data: { turbo_stream: true } do %>
            <i class="fas fa-edit"></i>
          <% end %>
          <%= link_to chat_message_path(message.chat, message), class: "text-muted text-decoration-none", title: "Delete", data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } do %>
            <i class="fas fa-trash"></i>
          <% end %>
        </div>
      <% end %>
      <small class="text-muted"><%= message.created_at.strftime("%l:%M%p").strip.downcase %></small>
    </div>
  </div>
  <div class="message-content">
    <%= markdown_render(message.content) %>
  </div>
</div>
